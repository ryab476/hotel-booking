<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <button onclick="send()">Отправить тест</button>
  <script>
    // Проверка, что WebApp доступен
    if (!window.Telegram || !window.Telegram.WebApp) {
      alert("Telegram WebApp недоступен");
      WebApp.showAlert("Telegram WebApp недоступен";
      throw new Error("Telegram WebApp not available");
    }
    else {
      WebApp.showAlert("Telegram WebApp доступен";
    }

    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    function send() {
      WebApp.showAlert("Функция отправки сработала";
      Telegram.WebApp.sendData(JSON.stringify({test: "работает"}));
      Telegram.WebApp.close();
    }
  </script>
</body>
</html>
