<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <button onclick="send()">Отправить тест</button>

  <script>
    // Проверка, что Telegram и Telegram.WebApp доступны
    if (!window.Telegram || !window.Telegram.WebApp) {
      alert("Telegram WebApp недоступен");
      console.error("Telegram WebApp not available");
      throw new Error("Telegram WebApp not available");
    } else {
      Telegram.WebApp.showAlert("Telegram WebApp доступен");
    }

    // Инициализация
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    // Функция отправки
    function send() {
      Telegram.WebApp.showAlert("Функция отправки сработала");
      Telegram.WebApp.sendData(JSON.stringify({ test: "работает" }));
      Telegram.WebApp.close();
    }
  </script>
</body>
</html>
