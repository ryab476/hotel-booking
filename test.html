<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <title>MiniApp — тест</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 16px; }
    button { padding: 10px 14px; font-size: 16px; }
    #status { margin-top: 12px; color: #333; }
  </style>
</head>
<body>
  <h2>Мини-приложение тест</h2>

  <p>Это упрощённый пример: нажмите кнопку, чтобы отправить данные боту.</p>

  <button id="sendBtn">Отправить ping</button>
  <div id="status"></div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  const WebApp = window.Telegram.WebApp;
  WebApp.ready();

  document.getElementById('bookBtn').addEventListener('click', function() {
    // Собираем данные из формы
    const hotel = document.getElementById('hotel').value;
    const category = document.getElementById('category').value;
    const guests = document.getElementById('guests').value;
    const lastName = document.getElementById('lastName').value;
    const firstName = document.getElementById('firstName').value;
    const middleName = document.getElementById('middleName').value || null;
    const email = document.getElementById('email').value || null;
    const passportSeries = document.getElementById('passportSeries').value;
    const passportNumber = document.getElementById('passportNumber').value;
    const issueDate = document.getElementById('issueDate').value;
    const issuedBy = document.getElementById('issuedBy').value;
    const phone = document.getElementById('phone').value;
    const comment = document.getElementById('comment').value || null;
    const checkin = document.getElementById('checkin').value;
    const checkout = document.getElementById('checkout').value;

    // Валидация (минимальная)
    if (!hotel || !category || !lastName || !firstName) {
      WebApp.showAlert("Заполните обязательные поля");
      return;
    }

    // Отправка
    const payload = {
      hotel, category, guests, lastName, firstName, middleName,
      email, passportSeries, passportNumber, issueDate, issuedBy,
      phone, comment, checkin, checkout
    };

    WebApp.sendData(JSON.stringify(payload));
    WebApp.close();
  });
</script>
</body>
</html>
